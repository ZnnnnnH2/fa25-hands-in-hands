// 仿thinkphp U 函数
function U(str) {
    return '/' + str.toLowerCase();
}

//////////////////////////////////////////////////
/////////////////ready///////////////////////////////
//////////////////////////////////////////////////////////////







/***************************************************************************/
/*																			*/
/*						以下为自建函数									   */
/*																			*/
/*																			*/
/***************************************************************************/

//====表单验证公共解决办法====
//=======公用验证函数=======
//thisForm  : 传入 this
//myText    ：待验证的文本，如$("#password").val()
//myPattern ：正则模式
//alertStr  ：验证失败时的提示文本。 不需要提示时传入 ""

function checkSubmit(thisForm, myText, myPattern, alertStr) {
	with(thisForm) {
		var ptn1 = new RegExp(myPattern);
		if (!ptn1.test(myText)) {
			if (alertStr != "") alert(alertStr);
			return false;
		}
		return true;
	}
}

function checkFormat(text, pattern) {
	var ptn = new RegExp(pattern);
	if (!ptn.test(text)) {
		return false;
	}
	return true;
}

/*====需要的正则表达式====
学号：	"^[0-9]{10}$"
工号：	"^[0-9]{8}$"
6位密码：	".{6,}"
不能为空：	"[^ \t\n]+"
*/

/*=====使用示例======
登陆界面中：
if(checkSubmit(this, v, "[0-9]{8}", "") || checkSubmit(this, v, "[0-9]{10}", "")) {
	//检测学工号是否为8位或十位
}
else {
	//非法输入
}
*/

/////////////////////////////////////////////////
///////////////////////全局/////////////////////
////////////////////////////////////////////////


//以下自建函数，清除alert

function clearAlert(time) {
	if (!time) {
		time = 0;
	}
	setTimeout(function() {
		$(".bootbox").modal("hide");
	}, time * 2000);
}

function CA(time) {
	if (!time) {
		time = 0;
	}
	setTimeout(function() {
		$(".bootbox").modal("hide");
	}, time * 2000);
}

function CAR(time) {
	if (!time) {
		time = 0;
	}
	setTimeout(function() {
		location.reload();
	}, time * 2000);
}


//list-group-item 设置为当前（Active）项
function setActive($s){
	$s.append("<span class='glyphicon glyphicon-chevron-right pull-right'></span>");
}


///////////////////////////////////////////////////////////
////////////////////header部分///////////////////////////////
///////////////////////////////////////////////////////////



/////////////////////加载主题//////////////////////////
function setTheme(){
	var theme=$.cookie("theme");
	if(theme){
		$("#theme").attr("href",theme);
	}
}
/////////////////////////////////////////////////////////////////
/////////////////////////corner部分/////////////////////////////////
//////////////////////////////////////////////////////////////////////


////////////////////////////////////回顶部//////////////////////////

function goTop(acceleration, time) {
	acceleration = acceleration || 0.3;
	time = time || 3;
	var x1 = 0;
	var y1 = 0;
	var x2 = 0;
	var y2 = 0;
	var x3 = 0;
	var y3 = 0;
	if (document.documentElement) {
		x1 = document.documentElement.scrollLeft || 0;
		y1 = document.documentElement.scrollTop || 0;
	}
	if (document.body) {
		x2 = document.body.scrollLeft || 0;
		y2 = document.body.scrollTop || 0;
	}
	var x3 = window.scrollX || 0;
	var y3 = window.scrollY || 0;

	// 滚动条到页面顶部的水平距离
	var x = Math.max(x1, Math.max(x2, x3));
	// 滚动条到页面顶部的垂直距离
	var y = Math.max(y1, Math.max(y2, y3));
	// 滚动距离 = 目前距离 / 速度, 因为距离原来越小, 速度是大于 1 的数, 所以滚动距离会越来越小
	var speed = 1 + acceleration;
	window.scrollTo(Math.floor(x / speed), Math.floor(y / speed));
	// 如果距离不为零, 继续调用迭代本函数
	if (x > 0 || y > 0) {
		var invokeFunction = "goTop(" + acceleration + ", " + time + ")";
		window.setTimeout(invokeFunction, time);
	}
}
